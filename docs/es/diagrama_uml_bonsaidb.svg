<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1230px" preserveAspectRatio="none" style="width:764px;height:1230px;background:#FFFFFF;" version="1.1" viewBox="0 0 764 1230" width="764px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="351" x="199.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="341" x="204.5" y="22.9951">BonsaiDB :: Plano Arquitectónico de Clases</text><rect fill="#F8F8FF" height="152.1953" id="_legend" rx="7.5" ry="7.5" style="stroke:#666666;stroke-width:1.0;" width="635" x="57.5" y="45.2969"/><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="63.5" y="65.3638"> </text><text fill="#222222" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="282" x="67.5" y="65.3638">Leyenda de Arquitectura de BonsaiDB</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="349.5" y="65.3638"> </text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="353.5" y="65.3638"> </text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="67.5" y="80.4966">&lt;&lt;Componente&gt;&gt;</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238" x="357.5" y="80.4966">Clase con lógica de negocio principal.</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="67.5" y="95.6294">&lt;&lt;Utilidad&gt;&gt;</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="357.5" y="95.6294">Clase que provee servicios de bajo nivel.</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="67.5" y="110.7622">&lt;&lt;Estructura&gt;&gt;</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="357.5" y="110.7622">Estructura que define la organización de datos.</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="67.5" y="125.895">&lt;&lt;Dato&gt;&gt;</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="357.5" y="125.895">Objeto que representa los datos del usuario.</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="63.5" y="141.0278">----</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="353.5" y="141.0278">----</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="67.5" y="156.1606">A *-- B</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="353.5" y="156.1606"> </text><text fill="#222222" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="94" x="357.5" y="156.1606">Composición</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="451.5" y="156.1606">: A es dueño de B. B no existe sin A.</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="67.5" y="171.2935">A o-- B</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="353.5" y="171.2935"> </text><text fill="#222222" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="84" x="357.5" y="171.2935">Agregación</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="441.5" y="171.2935">: A usa B. B puede existir sin A.</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="67.5" y="186.4263">A ..&gt; B</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="353.5" y="186.4263"> </text><text fill="#222222" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97" x="357.5" y="186.4263">Dependencia</text><text fill="#222222" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="454.5" y="186.4263">: A utiliza B (parámetro, etc).</text><line style="stroke:#222222;stroke-width:1.0;" x1="63.5" x2="686.5" y1="53.2969" y2="53.2969"/><line style="stroke:#222222;stroke-width:1.0;" x1="63.5" x2="686.5" y1="68.4297" y2="68.4297"/><line style="stroke:#222222;stroke-width:1.0;" x1="63.5" x2="686.5" y1="83.5625" y2="83.5625"/><line style="stroke:#222222;stroke-width:1.0;" x1="63.5" x2="686.5" y1="98.6953" y2="98.6953"/><line style="stroke:#222222;stroke-width:1.0;" x1="63.5" x2="686.5" y1="113.8281" y2="113.8281"/><line style="stroke:#222222;stroke-width:1.0;" x1="63.5" x2="686.5" y1="128.9609" y2="128.9609"/><line style="stroke:#222222;stroke-width:1.0;" x1="63.5" x2="686.5" y1="144.0938" y2="144.0938"/><line style="stroke:#222222;stroke-width:1.0;" x1="63.5" x2="686.5" y1="159.2266" y2="159.2266"/><line style="stroke:#222222;stroke-width:1.0;" x1="63.5" x2="686.5" y1="174.3594" y2="174.3594"/><line style="stroke:#222222;stroke-width:1.0;" x1="63.5" x2="686.5" y1="189.4922" y2="189.4922"/><line style="stroke:#222222;stroke-width:1.0;" x1="63.5" x2="63.5" y1="53.2969" y2="189.4922"/><line style="stroke:#222222;stroke-width:1.0;" x1="353.5" x2="353.5" y1="53.2969" y2="189.4922"/><line style="stroke:#222222;stroke-width:1.0;" x1="686.5" x2="686.5" y1="53.2969" y2="189.4922"/><!--MD5=[25bd5e9105a7d8b9513a185a860b0295]
cluster Engine Core--><g id="cluster_Engine Core"><path d="M123.5,212.4922 L220.5,212.4922 A3.75,3.75 0 0 1 223,214.9922 L230,234.7891 L470.5,234.7891 A2.5,2.5 0 0 1 473,237.2891 L473,596.9922 A2.5,2.5 0 0 1 470.5,599.4922 L123.5,599.4922 A2.5,2.5 0 0 1 121,596.9922 L121,214.9922 A2.5,2.5 0 0 1 123.5,212.4922 " fill="#F7F7F7" style="stroke:#666666;stroke-width:1.5;"/><line style="stroke:#666666;stroke-width:1.5;" x1="121" x2="230" y1="234.7891" y2="234.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="96" x="125" y="227.4873">Engine Core</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="58" x="272" y="249.7842">«Motor»</text></g><!--MD5=[07cae965747ee1c7bffd7fd64e75133c]
cluster Storage Layer--><g id="cluster_Storage Layer"><path d="M249.5,648.4922 L361.5,648.4922 A3.75,3.75 0 0 1 364,650.9922 L371,670.7891 L672.5,670.7891 A2.5,2.5 0 0 1 675,673.2891 L675,999.9922 A2.5,2.5 0 0 1 672.5,1002.4922 L249.5,1002.4922 A2.5,2.5 0 0 1 247,999.9922 L247,650.9922 A2.5,2.5 0 0 1 249.5,648.4922 " fill="#F7F7F7" style="stroke:#666666;stroke-width:1.5;"/><line style="stroke:#666666;stroke-width:1.5;" x1="247" x2="371" y1="670.7891" y2="670.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="111" x="251" y="663.4873">Storage Layer</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="133" x="398.5" y="685.7842">«Almacenamiento»</text></g><!--MD5=[b11171ad3bb551d33cdfdc5c1810e1ae]
cluster Data Structures--><g id="cluster_Data Structures"><path d="M8.5,1051.4922 L133.5,1051.4922 A3.75,3.75 0 0 1 136,1053.9922 L143,1073.7891 L612.5,1073.7891 A2.5,2.5 0 0 1 615,1076.2891 L615,1220.9922 A2.5,2.5 0 0 1 612.5,1223.4922 L8.5,1223.4922 A2.5,2.5 0 0 1 6,1220.9922 L6,1053.9922 A2.5,2.5 0 0 1 8.5,1051.4922 " fill="#F7F7F7" style="stroke:#666666;stroke-width:1.5;"/><line style="stroke:#666666;stroke-width:1.5;" x1="6" x2="143" y1="1073.7891" y2="1073.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="124" x="10" y="1066.4873">Data Structures</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="59" x="285" y="1088.7842">«Datos»</text></g><!--MD5=[55c6f5a56b6751ce96fea1606eee0ec3]
class DatabaseEngine--><g id="elem_DatabaseEngine"><rect codeLine="43" fill="#FFFFFF" height="137.75" id="DatabaseEngine" rx="2.5" ry="2.5" style="stroke:#0066CC;stroke-width:0.5;" width="273" x="183.5" y="263.4922"/><rect fill="#004080" height="40.2656" rx="2.5" ry="2.5" style="stroke:#004080;stroke-width:0.5;" width="273" x="183.5" y="263.4922"/><rect fill="#004080" height="2.5" style="stroke:#004080;stroke-width:0.5;" width="273" x="183.5" y="301.2578"/><rect codeLine="43" fill="none" height="137.75" id="DatabaseEngine" rx="2.5" ry="2.5" style="stroke:#0066CC;stroke-width:0.5;" width="273" x="183.5" y="263.4922"/><ellipse cx="258.75" cy="283.625" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M261.7188,289.2656 Q261.1406,289.5625 260.5,289.7031 Q259.8594,289.8594 259.1563,289.8594 Q256.6563,289.8594 255.3281,288.2188 Q254.0156,286.5625 254.0156,283.4375 Q254.0156,280.3125 255.3281,278.6563 Q256.6563,277 259.1563,277 Q259.8594,277 260.5,277.1563 Q261.1563,277.3125 261.7188,277.6094 L261.7188,280.3281 Q261.0938,279.75 260.5,279.4844 Q259.9063,279.2031 259.2813,279.2031 Q257.9375,279.2031 257.25,280.2813 Q256.5625,281.3438 256.5625,283.4375 Q256.5625,285.5313 257.25,286.6094 Q257.9375,287.6719 259.2813,287.6719 Q259.9063,287.6719 260.5,287.4063 Q261.0938,287.125 261.7188,286.5469 L261.7188,289.2656 Z " fill="#000000"/><text fill="#0066CC" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="94" x="289.25" y="279.6309">«Componente»</text><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="279.25" y="295.4561">DatabaseEngine</text><line style="stroke:#0066CC;stroke-width:0.5;" x1="184.5" x2="455.5" y1="303.7578" y2="303.7578"/><ellipse cx="194.5" cy="317.4063" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="247" x="203.5" y="320.7529">insert(record: const Record&amp;): bool</text><ellipse cx="194.5" cy="333.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="241" x="203.5" y="337.0498">find(id: int32_t): optional&lt;Record&gt;</text><ellipse cx="194.5" cy="350" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="203.5" y="353.3467">remove(id: int32_t): bool</text><line style="stroke:#0066CC;stroke-width:1.0;" x1="184.5" x2="455.5" y1="360.6484" y2="360.6484"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="207.5" y="371.2969"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="215" x="219.5" y="377.6436">index: unique_ptr&lt;BPlusTree&gt;</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="207.5" y="387.5938"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205" x="219.5" y="393.9404">engine_mutex: shared_mutex</text></g><!--MD5=[8eac7a77b34bebb45bb5a932e15e2fa1]
class BPlusTree--><g id="elem_BPlusTree"><rect codeLine="52" fill="#FFFFFF" height="105.1563" id="BPlusTree" rx="2.5" ry="2.5" style="stroke:#0066CC;stroke-width:0.5;" width="319" x="137.5" y="478.4922"/><rect fill="#004080" height="40.2656" rx="2.5" ry="2.5" style="stroke:#004080;stroke-width:0.5;" width="319" x="137.5" y="478.4922"/><rect fill="#004080" height="2.5" style="stroke:#004080;stroke-width:0.5;" width="319" x="137.5" y="516.2578"/><rect codeLine="52" fill="none" height="105.1563" id="BPlusTree" rx="2.5" ry="2.5" style="stroke:#0066CC;stroke-width:0.5;" width="319" x="137.5" y="478.4922"/><ellipse cx="247.75" cy="498.625" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M250.7188,504.2656 Q250.1406,504.5625 249.5,504.7031 Q248.8594,504.8594 248.1563,504.8594 Q245.6563,504.8594 244.3281,503.2188 Q243.0156,501.5625 243.0156,498.4375 Q243.0156,495.3125 244.3281,493.6563 Q245.6563,492 248.1563,492 Q248.8594,492 249.5,492.1563 Q250.1563,492.3125 250.7188,492.6094 L250.7188,495.3281 Q250.0938,494.75 249.5,494.4844 Q248.9063,494.2031 248.2813,494.2031 Q246.9375,494.2031 246.25,495.2813 Q245.5625,496.3438 245.5625,498.4375 Q245.5625,500.5313 246.25,501.6094 Q246.9375,502.6719 248.2813,502.6719 Q248.9063,502.6719 249.5,502.4063 Q250.0938,502.125 250.7188,501.5469 L250.7188,504.2656 Z " fill="#000000"/><text fill="#0066CC" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="94" x="266.25" y="494.6309">«Componente»</text><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="277.75" y="510.4561">BPlusTree</text><line style="stroke:#0066CC;stroke-width:0.5;" x1="138.5" x2="455.5" y1="518.7578" y2="518.7578"/><line style="stroke:#0066CC;stroke-width:0.5;" x1="138.5" x2="455.5" y1="526.7578" y2="526.7578"/><ellipse cx="148.5" cy="540.4063" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="157.5" y="543.7529">insert(key: int32_t, page_id: uint32_t): void</text><ellipse cx="148.5" cy="556.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="281" x="157.5" y="560.0498">search(key: int32_t): optional&lt;uint32_t&gt;</text><ellipse cx="148.5" cy="573" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="157.5" y="576.3467">remove(key: int32_t): bool</text></g><!--MD5=[39c2281ae53c3ff3a0b7fb6db148b969]
class FileManager--><g id="elem_FileManager"><rect codeLine="60" fill="#FFFFFF" height="105.1563" id="FileManager" rx="2.5" ry="2.5" style="stroke:#0066CC;stroke-width:0.5;" width="397" x="262.5" y="699.4922"/><rect fill="#004080" height="40.2656" rx="2.5" ry="2.5" style="stroke:#004080;stroke-width:0.5;" width="397" x="262.5" y="699.4922"/><rect fill="#004080" height="2.5" style="stroke:#004080;stroke-width:0.5;" width="397" x="262.5" y="737.2578"/><rect codeLine="60" fill="none" height="105.1563" id="FileManager" rx="2.5" ry="2.5" style="stroke:#0066CC;stroke-width:0.5;" width="397" x="262.5" y="699.4922"/><ellipse cx="415.25" cy="719.625" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M418.2188,725.2656 Q417.6406,725.5625 417,725.7031 Q416.3594,725.8594 415.6563,725.8594 Q413.1563,725.8594 411.8281,724.2188 Q410.5156,722.5625 410.5156,719.4375 Q410.5156,716.3125 411.8281,714.6563 Q413.1563,713 415.6563,713 Q416.3594,713 417,713.1563 Q417.6563,713.3125 418.2188,713.6094 L418.2188,716.3281 Q417.5938,715.75 417,715.4844 Q416.4063,715.2031 415.7813,715.2031 Q414.4375,715.2031 413.75,716.2813 Q413.0625,717.3438 413.0625,719.4375 Q413.0625,721.5313 413.75,722.6094 Q414.4375,723.6719 415.7813,723.6719 Q416.4063,723.6719 417,723.4063 Q417.5938,723.125 418.2188,722.5469 L418.2188,725.2656 Z " fill="#000000"/><text fill="#0066CC" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="61" x="446.75" y="715.6309">«Utilidad»</text><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="435.75" y="731.4561">FileManager</text><line style="stroke:#0066CC;stroke-width:0.5;" x1="263.5" x2="658.5" y1="739.7578" y2="739.7578"/><line style="stroke:#0066CC;stroke-width:0.5;" x1="263.5" x2="658.5" y1="747.7578" y2="747.7578"/><ellipse cx="273.5" cy="761.4063" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="371" x="282.5" y="764.7529">writePage(pageId: uint32_t, page: const Page&amp;): bool</text><ellipse cx="273.5" cy="777.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="326" x="282.5" y="781.0498">readPage(pageId: uint32_t, page: Page&amp;): bool</text><ellipse cx="273.5" cy="794" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="282.5" y="797.3467">allocatePage(): uint32_t</text></g><!--MD5=[6a494c20d032ff54e1efa92c1369bc7b]
class Page--><g id="elem_Page"><rect codeLine="66" fill="#FFFFFF" height="105.1563" id="Page" rx="2.5" ry="2.5" style="stroke:#0066CC;stroke-width:0.5;" width="310" x="311" y="881.4922"/><rect fill="#004080" height="40.2656" rx="2.5" ry="2.5" style="stroke:#004080;stroke-width:0.5;" width="310" x="311" y="881.4922"/><rect fill="#004080" height="2.5" style="stroke:#004080;stroke-width:0.5;" width="310" x="311" y="919.2578"/><rect codeLine="66" fill="none" height="105.1563" id="Page" rx="2.5" ry="2.5" style="stroke:#0066CC;stroke-width:0.5;" width="310" x="311" y="881.4922"/><ellipse cx="423.75" cy="901.625" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M426.7188,907.2656 Q426.1406,907.5625 425.5,907.7031 Q424.8594,907.8594 424.1563,907.8594 Q421.6563,907.8594 420.3281,906.2188 Q419.0156,904.5625 419.0156,901.4375 Q419.0156,898.3125 420.3281,896.6563 Q421.6563,895 424.1563,895 Q424.8594,895 425.5,895.1563 Q426.1563,895.3125 426.7188,895.6094 L426.7188,898.3281 Q426.0938,897.75 425.5,897.4844 Q424.9063,897.2031 424.2813,897.2031 Q422.9375,897.2031 422.25,898.2813 Q421.5625,899.3438 421.5625,901.4375 Q421.5625,903.5313 422.25,904.6094 Q422.9375,905.6719 424.2813,905.6719 Q424.9063,905.6719 425.5,905.4063 Q426.0938,905.125 426.7188,904.5469 L426.7188,907.2656 Z " fill="#000000"/><text fill="#0066CC" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="80" x="442.25" y="897.6309">«Estructura»</text><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="464.75" y="913.4561">Page</text><line style="stroke:#0066CC;stroke-width:0.5;" x1="312" x2="620" y1="921.7578" y2="921.7578"/><line style="stroke:#0066CC;stroke-width:0.5;" x1="312" x2="620" y1="929.7578" y2="929.7578"/><ellipse cx="322" cy="943.4063" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="284" x="331" y="946.7529">addRecord(record: const Record&amp;): bool</text><ellipse cx="322" cy="959.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="260" x="331" y="963.0498">getRecords(): const vector&lt;Record&gt;</text><ellipse cx="322" cy="976" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="331" y="979.3467">removeRecord(id: int32_t): bool</text></g><!--MD5=[5c85d133e2c913f4b8608c8db253c015]
class Record--><g id="elem_Record"><rect codeLine="74" fill="#FFFFFF" height="105.1563" id="Record" rx="2.5" ry="2.5" style="stroke:#0066CC;stroke-width:0.5;" width="260" x="339" y="1102.4922"/><rect fill="#004080" height="40.2656" rx="2.5" ry="2.5" style="stroke:#004080;stroke-width:0.5;" width="260" x="339" y="1102.4922"/><rect fill="#004080" height="2.5" style="stroke:#004080;stroke-width:0.5;" width="260" x="339" y="1140.2578"/><rect codeLine="74" fill="none" height="105.1563" id="Record" rx="2.5" ry="2.5" style="stroke:#0066CC;stroke-width:0.5;" width="260" x="339" y="1102.4922"/><ellipse cx="439.75" cy="1122.625" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M442.7188,1128.2656 Q442.1406,1128.5625 441.5,1128.7031 Q440.8594,1128.8594 440.1563,1128.8594 Q437.6563,1128.8594 436.3281,1127.2188 Q435.0156,1125.5625 435.0156,1122.4375 Q435.0156,1119.3125 436.3281,1117.6563 Q437.6563,1116 440.1563,1116 Q440.8594,1116 441.5,1116.1563 Q442.1563,1116.3125 442.7188,1116.6094 L442.7188,1119.3281 Q442.0938,1118.75 441.5,1118.4844 Q440.9063,1118.2031 440.2813,1118.2031 Q438.9375,1118.2031 438.25,1119.2813 Q437.5625,1120.3438 437.5625,1122.4375 Q437.5625,1124.5313 438.25,1125.6094 Q438.9375,1126.6719 440.2813,1126.6719 Q440.9063,1126.6719 441.5,1126.4063 Q442.0938,1126.125 442.7188,1125.5469 L442.7188,1128.2656 Z " fill="#000000"/><text fill="#0066CC" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="44" x="463.25" y="1118.6309">«Dato»</text><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="460.25" y="1134.4561">Record</text><line style="stroke:#0066CC;stroke-width:0.5;" x1="340" x2="598" y1="1142.7578" y2="1142.7578"/><ellipse cx="350" cy="1156.4063" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="359" y="1159.7529">id: int32_t</text><ellipse cx="350" cy="1172.7031" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="359" y="1176.0498">name: char[50]</text><line style="stroke:#0066CC;stroke-width:0.5;" x1="340" x2="598" y1="1183.3516" y2="1183.3516"/><ellipse cx="350" cy="1197" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="234" x="359" y="1200.3467">getRecordSize(): constexpr size_t</text></g><!--MD5=[dfe6ecaabf6168bd5852ee990a8d1994]
class BPlusNode--><g id="elem_BPlusNode"><rect codeLine="80" fill="#FFFFFF" height="105.1563" id="BPlusNode" rx="2.5" ry="2.5" style="stroke:#0066CC;stroke-width:0.5;" width="282" x="22" y="1102.4922"/><rect fill="#004080" height="40.2656" rx="2.5" ry="2.5" style="stroke:#004080;stroke-width:0.5;" width="282" x="22" y="1102.4922"/><rect fill="#004080" height="2.5" style="stroke:#004080;stroke-width:0.5;" width="282" x="22" y="1140.2578"/><rect codeLine="80" fill="none" height="105.1563" id="BPlusNode" rx="2.5" ry="2.5" style="stroke:#0066CC;stroke-width:0.5;" width="282" x="22" y="1102.4922"/><ellipse cx="120.75" cy="1122.625" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M123.7188,1128.2656 Q123.1406,1128.5625 122.5,1128.7031 Q121.8594,1128.8594 121.1563,1128.8594 Q118.6563,1128.8594 117.3281,1127.2188 Q116.0156,1125.5625 116.0156,1122.4375 Q116.0156,1119.3125 117.3281,1117.6563 Q118.6563,1116 121.1563,1116 Q121.8594,1116 122.5,1116.1563 Q123.1563,1116.3125 123.7188,1116.6094 L123.7188,1119.3281 Q123.0938,1118.75 122.5,1118.4844 Q121.9063,1118.2031 121.2813,1118.2031 Q119.9375,1118.2031 119.25,1119.2813 Q118.5625,1120.3438 118.5625,1122.4375 Q118.5625,1124.5313 119.25,1125.6094 Q119.9375,1126.6719 121.2813,1126.6719 Q121.9063,1126.6719 122.5,1126.4063 Q123.0938,1126.125 123.7188,1125.5469 L123.7188,1128.2656 Z " fill="#000000"/><text fill="#0066CC" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="80" x="139.25" y="1118.6309">«Estructura»</text><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="141.25" y="1134.4561">BPlusNode</text><line style="stroke:#0066CC;stroke-width:0.5;" x1="23" x2="303" y1="1142.7578" y2="1142.7578"/><ellipse cx="33" cy="1156.4063" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="42" y="1159.7529">is_leaf: bool</text><ellipse cx="33" cy="1172.7031" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="155" x="42" y="1176.0498">keys: vector&lt;int32_t&gt;</text><ellipse cx="33" cy="1189" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#2A2A2A" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="256" x="42" y="1192.3467">children_page_ids: vector&lt;uint32_t&gt;</text><line style="stroke:#0066CC;stroke-width:0.5;" x1="23" x2="303" y1="1199.6484" y2="1199.6484"/></g><!--MD5=[ab400d53d4d567d927e375e4ae8a43ac]
reverse link DatabaseEngine to BPlusTree--><g id="link_DatabaseEngine_BPlusTree"><path codeLine="87" d="M310.48,414.8622 C307.96,436.3422 305.32,458.9322 303.04,478.3622 " fill="none" id="DatabaseEngine-backto-BPlusTree" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="312.02,401.6622,307.3485,407.1555,310.6225,413.5805,315.294,408.0872,312.02,401.6622" style="stroke:#333333;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="309" y="444.5591">Composición</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="295.3141" y="467.3475">1</text></g><!--MD5=[5342ec37145861e36c68061bb80578f6]
link DatabaseEngine to Record--><g id="link_DatabaseEngine_Record"><path codeLine="88" d="M456.52,343.3222 C575.79,360.2422 730,406.0622 730,529.9922 C730,529.9922 730,529.9922 730,934.9922 C730,1009.6522 666.55,1063.9322 602.22,1099.7722 " fill="none" id="DatabaseEngine-to-Record" style="stroke:#333333;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#333333" points="597.59,1102.3222,607.4042,1101.4972,601.9729,1099.9159,603.5542,1094.4845,597.59,1102.3222" style="stroke:#333333;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="731" y="756.5591">Usa</text></g><!--MD5=[530469d78040116e33ed03be4fd3f2fc]
link BPlusTree to BPlusNode--><g id="link_BPlusTree_BPlusNode"><path codeLine="89" d="M271.96,583.7122 C263.64,601.5422 254.58,621.7422 247,640.4922 C212.73,725.1922 196.58,744.8322 179,834.4922 C161.26,925.0122 159.8,1032.5522 160.97,1096.9322 " fill="none" id="BPlusTree-to-BPlusNode" style="stroke:#333333;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#333333" points="161.07,1102.2522,164.8892,1093.174,160.97,1097.2532,156.8908,1093.334,161.07,1102.2522" style="stroke:#333333;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="180" y="847.5591">Opera con</text></g><!--MD5=[d82e125572e5f28d2be15a5abd9e82e0]
reverse link DatabaseEngine to FileManager--><g id="link_DatabaseEngine_FileManager"><path codeLine="91" d="M425.97,410.7922 C445.49,430.4922 463.13,453.3222 474,478.4922 C504.99,550.2322 490.63,642.7022 476.51,699.3722 " fill="none" id="DatabaseEngine-backto-FileManager" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="#333333" points="416.57,401.6622,418.0884,408.7116,425.1796,410.0213,423.6612,402.9719,416.57,401.6622" style="stroke:#333333;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="493" y="535.5591">Composición</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="470.0567" y="688.3589">1</text></g><!--MD5=[1af4d71e002c8e9308dec33cc8221740]
reverse link BPlusTree to FileManager--><g id="link_BPlusTree_FileManager"><path codeLine="92" d="M343.54,594.1322 C368.43,627.3822 398.73,667.8422 422.32,699.3322 " fill="none" id="BPlusTree-backto-FileManager" style="stroke:#333333;stroke-width:1.0;"/><polygon fill="none" points="335.66,583.6122,336.06,590.8122,342.86,593.2122,342.46,586.0122,335.66,583.6122" style="stroke:#333333;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="370" y="628.5591">Agregación</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="408.5849" y="688.3135">1</text></g><!--MD5=[fb286dc4d84f06e793b8c13afce37d40]
link FileManager to Page--><g id="link_FileManager_Page"><path codeLine="93" d="M462.43,804.5722 C463.06,826.9822 463.79,853.3022 464.42,876.2522 " fill="none" id="FileManager-to-Page" style="stroke:#333333;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#333333" points="464.57,881.4022,468.3113,872.2916,464.4272,876.4042,460.3146,872.5201,464.57,881.4022" style="stroke:#333333;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="464" y="847.5591">Gestiona</text></g><!--MD5=[2c91a79f49f083f3cee8bb2388ef4cfc]
link Page to Record--><g id="link_Page_Record"><path codeLine="95" d="M466.71,986.6122 C467.16,1019.7422 467.75,1062.7922 468.22,1096.9322 " fill="none" id="Page-to-Record" style="stroke:#333333;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#333333" points="468.29,1102.3322,472.161,1093.276,468.2186,1097.3327,464.1618,1093.3902,468.29,1102.3322" style="stroke:#333333;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="468" y="1031.5591">Contiene</text></g><!--MD5=[7df4294c9c450ef960fa8f2da03da6e9]
@startuml
title **BonsaiDB :: Plano Arquitectónico de Clases**

skinparam backgroundColor #FFFFFF
skinparam shadowing false
skinparam ArrowColor #333333
skinparam BorderColor #444444
skinparam FontName "Segoe UI"
skinparam FontSize 12
skinparam DefaultTextAlignment center

skinparam package {
    BorderColor #666666
    BackgroundColor #F7F7F7
    BorderStyle solid
    FontColor #1A1A1A
}

skinparam class {
    BackgroundColor #FFFFFF
    BorderColor #0066CC
    BorderStyle solid
    HeaderBackgroundColor #004080
    FontColor #111111
    AttributeFontColor #2A2A2A
    StereotypeFontColor #0066CC
    HeaderFontColor #FFFFFF
}

skinparam note {
    BackgroundColor #FBFBFF
    BorderColor #0066CC
    FontColor #003366
}

skinparam legend {
    BackgroundColor #F8F8FF
    BorderColor #666666
    FontColor #222222
    FontSize 13
}

package "Engine Core" <<Motor>> {
    class DatabaseEngine <<Componente>> {
        + insert(record: const Record&): bool
        + find(id: int32_t): optional<Record>
        + remove(id: int32_t): bool
        - -
        - index: unique_ptr<BPlusTree>
        - engine_mutex: shared_mutex
    }

    class BPlusTree <<Componente>> {
        + insert(key: int32_t, page_id: uint32_t): void
        + search(key: int32_t): optional<uint32_t>
        + remove(key: int32_t): bool
    }
}

package "Storage Layer" <<Almacenamiento>> {
    class FileManager <<Utilidad>> {
        + writePage(pageId: uint32_t, page: const Page&): bool
        + readPage(pageId: uint32_t, page: Page&): bool
        + allocatePage(): uint32_t
    }

    class Page <<Estructura>> {
        + addRecord(record: const Record&): bool
        + getRecords(): const vector<Record>
        + removeRecord(id: int32_t): bool
    }
}

package "Data Structures" <<Datos>> {
    class Record <<Dato>> {
        + id: int32_t
        + name: char[50]
        + {static} getRecordSize(): constexpr size_t
    }

    class BPlusNode <<Estructura>> {
        + is_leaf: bool
        + keys: vector<int32_t>
        + children_page_ids: vector<uint32_t>
    }
}

DatabaseEngine *- - "1" BPlusTree : Composición
DatabaseEngine ..> Record : Usa
BPlusTree ..> BPlusNode : Opera con

DatabaseEngine *- - "1" FileManager : Composición
BPlusTree o- - "1" FileManager : Agregación
FileManager ..> Page : Gestiona

Page ..> Record : Contiene

legend top
| <b>Leyenda de Arquitectura de BonsaiDB</b> | |
| <<Componente>> | Clase con lógica de negocio principal. |
| <<Utilidad>>   | Clase que provee servicios de bajo nivel. |
| <<Estructura>> | Estructura que define la organización de datos. |
| <<Dato>>       | Objeto que representa los datos del usuario. |
|- - - -|- - - -|
| A *- - B | <b>Composición</b>: A es dueño de B. B no existe sin A. |
| A o- - B | <b>Agregación</b>: A usa B. B puede existir sin A. |
| A ..> B | <b>Dependencia</b>: A utiliza B (parámetro, etc). |
end legend
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>